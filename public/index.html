<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- <title>Oneroute Web Widget</title> -->
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>

    <!-- 
      When using your widget, you want to give people the chance to resize it to their needs 
    -->

    <div
      class="oneroute_widget"
      data-widgetid="cff49f48-41e9-4eea-8cd5-86b86423799d"
    ></div>

    <script src="https://oneroute-backend.herokuapp.com/socket.io/socket.io.js"></script>
    <script>
      var element = document.querySelector(".oneroute_widget");
      console.log("HI THERE I'M HERE OOOOOOOOOO");

      var socket = io.connect("https://oneroute-backend.herokuapp.com/");
      socket.on("newMessage", (data) => {
        if (
          data?.conversation?.id === localStorage.getItem("conversationId") &&
          data?.message?.sender?.authUser !== false
        ) {
          element.setAttribute("data-newmessage", "true");
        }
      });
    </script>
  </body>
</html>
